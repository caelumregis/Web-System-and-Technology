<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout - Tipsy Bean</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <!-- Normalize CSS -->
  <link rel="stylesheet" href="../../css/common/normalize.css" />

  <!-- Custom Styles -->
  <link rel="stylesheet" href="../../css/common/style.css" />

  <!-- Checkout Styles -->
  <link rel="stylesheet" href="../../css/pages/checkout.css" />

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Playfair+Display+SC:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet"
  />

  <!-- Font Awesome Icons -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous"
  />
</head>

<body>
  <!-- Navigation -->
  <header>
    <nav class="navbar navbar-expand-lg bg-dark fixed-top custom-navbar" role="navigation">
      <div class="container-fluid px-4">
        <a class="navbar-brand d-flex align-items-center text-white fw-bold fs-3" href="../../../index.html">
          <img src="../../assets/images/logo/logo.jpeg" alt="Tipsy Bean Logo" class="logo-img me-2" />
          Tipsy Bean
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation menu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link text-white" href="../../../index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="./menu.html">Menu</a>
            </li>
            <li class="nav-item" id="profileLink">
              <a class="nav-link text-white" href="./profile.html">Profile</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="#" id="logoutBtn" data-bs-toggle="modal" data-bs-target="#logoutConfirmModal">Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- Checkout Container -->
  <main class="mt-5 pt-4">
    <div class="checkout-container">
      <div class="checkout-wrapper">
        <h1 class="page-title">Checkout</h1>

        <!-- Success/Error Messages -->
        <div class="success-message" id="successMessage" style="display: none;"></div>
        <div class="error-message" id="errorMessage" style="display: none;"></div>

        <div class="checkout-content">
          <!-- Left Column: Order Details -->
          <div class="checkout-left">
            <!-- Order Summary -->
            <section class="checkout-section">
              <h2 class="section-header">Order Summary</h2>
              <div class="order-items-container" id="orderItemsContainer">
                <p class="text-muted">Loading items...</p>
              </div>
            </section>

            <!-- Delivery Address -->
            <section class="checkout-section">
              <h2 class="section-header">Delivery Address</h2>
              <div class="address-display" id="addressDisplay">
                <p class="text-muted">Loading address...</p>
              </div>
              <button type="button" class="btn-edit-address" id="editAddressBtn">
                <i class="fas fa-edit"></i> Edit Address
              </button>
            </section>

            <!-- Additional Notes -->
            <section class="checkout-section">
              <h2 class="section-header">Additional Notes</h2>
              <textarea
                class="form-control"
                id="additionalNotes"
                placeholder="Add landmark, building number, room number, or any special instructions for delivery"
                rows="4"
              ></textarea>
            </section>

            <!-- Payment Method -->
            <section class="checkout-section">
              <h2 class="section-header">Payment Method</h2>
              <div class="payment-method">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="paymentMethod"
                    id="cashOnDelivery"
                    value="cash"
                    checked
                  />
                  <label class="form-check-label" for="cashOnDelivery">
                    Cash on Delivery
                  </label>
                </div>
              </div>
            </section>
          </div>

          <!-- Right Column: Order Total -->
          <div class="checkout-right">
            <section class="checkout-section order-total-section">
              <h2 class="section-header">Order Total</h2>

              <div class="total-row">
                <span class="total-label">Subtotal:</span>
                <span class="total-value" id="subtotalAmount">₱0.00</span>
              </div>

              <div class="total-row">
                <span class="total-label">Delivery Fee:</span>
                <span class="total-value">₱50.00</span>
              </div>

              <div class="total-row">
                <span class="total-label">Service Fee:</span>
                <span class="total-value">₱10.00</span>
              </div>

              <div class="divider"></div>

              <div class="total-row total-final">
                <span class="total-label fw-bold">Total:</span>
                <span class="total-value fw-bold" id="totalAmount">₱0.00</span>
              </div>

              <button type="submit" class="btn-place-order" id="placeOrderBtn">
                Place Order
              </button>

              <a href="./menu.html" class="btn-continue-shopping">
                <i class="fas fa-arrow-left"></i> Continue Shopping
              </a>
            </section>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Logout Confirmation Modal -->
  <div class="modal fade" id="logoutConfirmModal" tabindex="-1" aria-labelledby="logoutConfirmLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="logoutConfirmLabel">Confirm Logout</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p><strong>Are you sure you want to logout?</strong></p>
          <p>You will need to login again to access your profile and saved information.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="confirmLogoutBtn">Logout</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Address Modal -->
  <div class="modal fade" id="editAddressModal" tabindex="-1" aria-labelledby="editAddressLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="editAddressLabel">Edit Delivery Address</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="addressForm">
            <div class="mb-3">
              <label for="modalStreet" class="form-label">Street Address</label>
              <input type="text" class="form-control" id="modalStreet" name="street" required />
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="modalCity" class="form-label">City</label>
                <input type="text" class="form-control" id="modalCity" name="city" required />
              </div>
              <div class="col-md-6 mb-3">
                <label for="modalProvince" class="form-label">Province</label>
                <input type="text" class="form-control" id="modalProvince" name="province" required />
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="modalPostalCode" class="form-label">Postal Code</label>
                <input type="text" class="form-control" id="modalPostalCode" name="postalCode" required />
              </div>
              <div class="col-md-6 mb-3">
                <label for="modalCountry" class="form-label">Country</label>
                <input type="text" class="form-control" id="modalCountry" name="country" value="Philippines" required />
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="saveAddressBtn">Save Address</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS Bundle -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"
  ></script>

  <!-- Session Manager -->
  <script src="../../script/common/session.js"></script>

  <!-- Cart Manager -->
  <script src="../../script/common/cart.js"></script>

  <!-- Checkout Script -->
  <script src="../../script/pages/checkout.js"></script>
</body>
</html>
